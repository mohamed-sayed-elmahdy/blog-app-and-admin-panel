
 


<!-- ØªÙ…Ø§Ù… Ø¬Ø¯Ù‹Ø§ ÙŠØ§ Ù…Ø­Ù…Ø¯ ðŸ‘Œ
Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„ÙŠ Ø¨ØªØªÙƒÙ„Ù… Ø¹Ù†Ù‡Ø§ Ø§Ø³Ù…Ù‡Ø§:

ðŸ”’ JWT Authentication Middleware
Ø£Ùˆ Ø¨ØªØªÙÙ‡Ù… ÙƒÙ€ Token-Based Authentication using JWT. -->
<!-- 
ðŸ“˜ Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©:

Ø§Ù„Ù€ frontend (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…) Ø¨ÙŠØ³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„ â†’ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠØ¨Ø¹ØªÙ„Ù‡ JWT token.

Ø¨Ø¹Ø¯ ÙƒØ¯Ù‡ØŒ ÙÙŠ Ø£ÙŠ Ø·Ù„Ø¨ (Ø²ÙŠ POST Ø£Ùˆ PUT Ø£Ùˆ DELETE)ØŒ
Ø§Ù„Ù€ frontend Ø¨ÙŠØ¨Ø¹Øª Ø§Ù„Ù€ token ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø± Ø¨Ø§Ù„Ø´ÙƒÙ„ Ø¯Ù‡:

Authorization: Bearer <your_token_here>


Ø§Ù„Ù€ backend ÙÙŠÙ‡ middleware (Ø²ÙŠ authMiddleware.js)
ÙˆØ¸ÙŠÙØªÙ‡:

ÙŠÙ‚Ø±Ø£ Ø§Ù„ØªÙˆÙƒÙ† Ù…Ù† Ø§Ù„Ù‡ÙŠØ¯Ø±.

ÙŠØªØ­Ù‚Ù‚ Ù…Ù†Ù‡ (verify) Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… secret key.

ÙŠØ³ØªØ®Ø±Ø¬ Ù…Ù†Ù‡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø²ÙŠ Ø§Ù„Ù€ id).

ÙŠØ­Ø·Ù‡Ø§ ÙÙŠ req.user Ø¹Ù„Ø´Ø§Ù† Ø£ÙŠ route Ø¨Ø¹Ø¯ ÙƒØ¯Ù‡ ÙŠÙ‚Ø¯Ø± ÙŠØ³ØªØ®Ø¯Ù…Ù‡Ø§.

ðŸ§© Ù…Ø«Ø§Ù„ Ø¨Ø³ÙŠØ·:
ðŸ§± middleware/auth.js
import jwt from "jsonwebtoken";

export function verifyToken(req, res, next) {
  try {
    const authHeader = req.headers.authorization;
    if (!authHeader || !authHeader.startsWith("Bearer ")) {
      return res.status(401).json({ message: "Access denied, no token provided" });
    }

    const token = authHeader.split(" ")[1];
    const decoded = jwt.verify(token, process.env.JWT_SECRET);

    req.user = decoded; // Ù‡Ù†Ø§ Ù…Ù…ÙƒÙ† ÙŠÙƒÙˆÙ† ÙÙŠÙ‡Ø§ userId Ø£Ùˆ email
    next(); // ÙƒÙ…Ù„ Ø§Ù„ØªÙ†ÙÙŠØ°
  } catch (error) {
    res.status(403).json({ message: "Invalid or expired token" });
  }
}

ðŸ§  Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙÙŠ Route
import { verifyToken } from "@/middleware/auth";

app.post("/api/blogs", verifyToken, async (req, res) => {
  const userId = req.user.id; // Ø¬Ø§ÙŠ Ù…Ù† Ø§Ù„ØªÙˆÙƒÙ†
  // ÙƒÙ…Ù„ Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙˆØ³Øª...
});

âœ… Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø¯ÙŠ:

Ø£ÙƒØ«Ø± Ø£Ù…Ø§Ù†Ù‹Ø§ Ù„Ø£Ù†Ùƒ Ù…Ø´ Ø¨ØªØ¨Ø¹Øª userId ÙÙŠ body (Ø§Ù„ØªÙˆÙƒÙ† Ù…Ø´ Ø³Ù‡Ù„ ÙŠØªÙ„Ø§Ø¹Ø¨ Ø¨ÙŠÙ‡).

Ù‚Ø§Ø¨Ù„Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ø£ÙŠ route (Ù…Ø¬Ø±Ø¯ ØªØ¶ÙŠÙ middleware).

Ø¨ØªØ´ØªØºÙ„ stateless â€” Ø§Ù„Ø³ÙŠØ±ÙØ± Ù…Ø´ Ø¨ÙŠØ®Ø²Ù† session Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù…. -->

-----------------------------------------------------------------------------------------------

<!-- ÙÙŠ Next.js ÙÙŠÙ‡ Ù£ Ù…Ø³ØªÙˆÙŠØ§Øª Ù…Ù…ÙƒÙ† Ù†Ø­Ø· Ø¹Ù†Ø¯Ù‡Ø§ Ø§Ù„Ù€ middleware:

ðŸ“ middleware.js (ÙÙŠ Ø§Ù„Ø¬Ø°Ø±)
â†’ Ø¨ÙŠØªÙ†ÙÙ‘Ø° Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ø±ÙŠÙƒÙˆØ³ØªØ§ØªØŒ Ø²ÙŠ Ø­Ù…Ø§ÙŠØ© ØµÙØ­Ø§Øª Ø£Ùˆ APIs Ø¹Ø§Ù…Ø©.

Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€ API route handler
â†’ Ù†Ø­Ø· Ø§Ù„ØªØ­Ù‚Ù‚ Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ù…Ù„Ù POST Ø£Ùˆ GET function.

ÙÙŠ Ù…Ù„Ù util Ø£Ùˆ helper
â†’ Ø¯Ø§Ù„Ø© Ø¹Ø§Ù…Ø© (Ø²ÙŠ verifyToken(request)) Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§ ÙÙŠ Ø£ÙŠ Route Ù†Ø­ØªØ§Ø¬Ù‡. -->



--------------------------------------------------------------------------------------------
<!-- ðŸ§© Ø®Ø·ÙˆØ§Øª Ø¥Ù†Ø´Ø§Ø¡ ØµÙØ­Ø© Ù„Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„ØªØ§Ø¬Ø² Ø£Ùˆ Ø§Ù„ÙƒØ§ØªÙŠØ¬ÙˆØ±ÙŠØ²

Ø¥Ù†Ø´Ø§Ø¡ Route Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ù€ backend (API) Ø®Ø§Øµ Ø¨Ø§Ù„ØªØ§Ø¬Ø² Ø£Ùˆ Ø§Ù„ÙƒØ§ØªÙŠØ¬ÙˆØ±ÙŠØ²

Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª MongoDB Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€ route

Ø§Ø³ØªØ®Ø¯Ø§Ù… Aggregation Pipeline Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ÙØ±ÙŠØ¯Ø© (unique)

ØªØ·Ø¨ÙŠÙ‚ $unwind Ø¹Ù„Ù‰ Ø§Ù„Ù…ØµÙÙˆÙØ§Øª (Ø²ÙŠ tags)

Ø§Ø³ØªØ®Ø¯Ø§Ù… $group Ù…Ø¹ $addToSet Ù„Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±

ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙÙ‚Ø· Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… $project

Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ JSON Response

ÙÙŠ Ø§Ù„Ù€ frontend: Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ù€ API Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… fetch Ø£Ùˆ axios

Ø¹Ø±Ø¶ Ø§Ù„Ù‚ÙŠÙ… (tags Ø£Ùˆ categories) ÙÙŠ ØµÙØ­Ø© Ù…Ø®ØµØµØ© Ù…Ø«Ù„ /tags Ø£Ùˆ /categories

ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù€ Indexes Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ù…Ø³Ø¨Ù‚Ù‹Ø§ -->